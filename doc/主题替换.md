

# 方案一：通过切换 CSS 选择器来统一修改样式

1. 在组件中保留不变的样式，将需要变化的样式进行抽离成多套主题，并定义对应的 css 选择器

2. 根据主题选择相应的样式进行渲染



抽离变化的样式并定义相应主题：

~~~css
/* light 默认主题*/
body.light {
  background-color: #fff;
}

.header.light {
  background-color: #fff;
  border-bottom: 1px solid #d6d6d6;
  color: rgb(51, 50, 50);
}

.list.light .title {
  color: rgb(51, 50, 50);
}
.list.light .describe{
  color: rgb(158, 158, 158);
}

.list.light .left{
  border: 1px solid rgb(51, 50, 50);
}

/* dark 暗黑主题 */
body.dark {
  background-color: rgb(51, 50, 50);
}

.header.dark {
  background-color: rgb(51, 50, 50);
  border-bottom: 1px solid #fff;
  color: #fff;
}

.list.dark .title {
  color: #fff;
}
.list.dark .describe{
  color: rgb(201, 201, 201);
}
.list.dark .left{
  border: 1px solid #fff;
  background-color: #fff;
}
~~~

css 类名动态获取：

~~~js
<template>
  /* css类名从vuex中动态获取 */
  <div :class="['header', store.state.theme]">
    <span>{{title}}</span>
    <input v-model="checked" type="checkbox" class="switch" @change="changeTheme" />
  </div>
</template>
~~~

手动修改样式：

~~~js
import { createStore } from 'vuex'

// 创建一个新的 store 实例
const store = createStore({
  state () {
    return {
      theme: 'light'
    }
  },
  mutations: {
    setTheme (state, payload) {
      state.theme = payload
      document.querySelector('body').className = payload
    }
  }
})

export default store
~~~

缺点：导致代码量增大、不易管理、容易混乱....





# 方案二： 预备多套CSS主题

1. 将样式拆分成 `ligth.css` 和 `dark.css` 两个文件

   ![image-20220717141930927](C:\Users\64554\AppData\Roaming\Typora\typora-user-images\image-20220717141930927.png)

2. 通过 js 控制外联样式表的href属性值切换主题样式

```html
<link id="theme-link" href="light.css" rel="stylesheet" type="text/css">
```



~~~js
export default function setTheme(theme = 'light') {
  let link = document.querySelector('#theme-link')
  let href = "/theme/" + theme + ".css"
  
  if (!link) {
    let head = document.querySelector('head')
    link = document.createElement('link')
    link.id = '#theme-link'
    link.rel = "stylesheet"
    link.href = href
    head.appendChild(link)
  } else {
    link.href = href
  }
}
~~~

缺点：

+ 需要手写多套 css 样式代码
+ 需要提前知道打包后的文件路径
+ 更换主题需要下载新的 css 样式代码







# 方案三：CSS变量结合方案一

css 变量换肤的核心是修改 css变量的值。

为了方便，通过修改选择器来统一修改里面包含的所有变量值。

+ 定义好不同主题的样式变量对应的类选择器
+ 通过切换类选择器名切换主题

~~~css
/* 默认 light 主题 */
:root {
  --width: 100vw;
  --height: 100vh;
  --bg: green;
  --color: #333333;
}

.pink-theme {
  --bg: hotpink;
  --color: white;
}

.dark-theme {
  --bg: #333333;
  --color: white;
}
~~~

手动修改样式：

~~~js
import { createStore } from 'vuex'

const store = createStore({
  state () {
    return {
      theme: ''
    }
  },
  mutations: {
    setTheme (state, theme) {
      state.theme = theme
    }
  }
})

export default store
~~~



~~~js
watch(()=> store.state.theme, (newTheme, oldTheme) => {
  document.body.classList.remove(oldTheme);
  document.body.classList.add(newTheme);
})
~~~



方案三思路与方案一类似，但通过使用变量，降低了维护成本，提高了开发效率。







